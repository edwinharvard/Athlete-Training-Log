{% extends "layout.html" %}

{% block title %}
    Coach: Add Workout  
{% endblock %}

{% block main %}
<div class="container">
    <!-- Button to go back to the homepage -->
    <div class="text-center mb-4">
        <a href="/" class="btn btn-secondary">Back to Homepage</a>
    </div>

    <h1 class="text-center mb-4">Add Workout</h1>

    <!-- Form to create a new workout -->
    <form action="/add-workout-coach" method="post" class="mx-auto" style="max-width: 600px;">

        <!-- Input field for completed hours of the workout -->
        <div class="mb-3">
            <label for="completed_hours" class="form-label">Completed Hours</label>
            <input type="number" name="completed_hours" id="completed_hours" class="form-control" placeholder="Completed Hours" min="0">
        </div>

        <!-- Input field for planned workout hours -->
        <div class="mb-3">
            <label for="planned_hours" class="form-label">Planned Hours</label>
            <input type="number" name="planned_hours" id="planned_hours" class="form-control" placeholder="Planned Hours" min="0">
        </div>

        <!-- Input field for the type of workout -->
        <div class="mb-3">
            <label for="workout_type" class="form-label">Workout Type</label>
            <input type="text" name="workout_type" id="workout_type" class="form-control" placeholder="Workout Type" required>
        </div>

        <!-- Input field for distance (if applicable) -->
        <div class="mb-3">
            <label for="distance" class="form-label">Distance (if applicable)</label>
            <input type="number" name="distance" id="distance" class="form-control" placeholder="Distance" min="0">
        </div>

        <!-- Text area for additional comments (if applicable) -->
        <div class="mb-3">
            <label for="comments" class="form-label">Comments (if applicable)</label>
            <textarea name="comments" id="comments" class="form-control" rows="3" placeholder="Comments"></textarea>
        </div>

        <!-- Input field for the workout date -->
        <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input type="date" name="date" id="date" class="form-control" required>
        </div>

        <!-- Input field for the workout title (optional) -->
        <div class="mb-3">
            <label for="title" class="form-label">Workout Title (if applicable)</label>
            <input type="text" name="title" id="title" class="form-control" placeholder="Title">
        </div>

        <!-- Dropdown to select athletes (coaches can select multiple athletes) -->
        <div class="mb-3">
            <label for="athlete_ids" class="form-label">Select Athlete(s)</label>
            <select name="athlete_ids" id="athlete_ids" class="form-control" multiple>
                <!-- Loop through all athletes and display them as options in the dropdown -->
                {% for athlete in athletes %}
                <option value="{{ athlete.id }}">{{ athlete.username }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Submit button to create the workout -->
        <button type="submit" class="btn btn-primary w-100">Create Workout</button>
    </form>
</div>

<!-- JavaScript for handling the "Clear Selections" button functionality -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const selectElement = document.getElementById('athlete_ids');

        // Create the "Clear Selections" button
        const resetButton = document.createElement('button');
        resetButton.textContent = 'Clear Selections';
        resetButton.type = 'button';
        resetButton.classList.add('btn', 'btn-secondary', 'w-50', 'mt-2'); // Add CSS classes for styling

        // Add event listener to reset button to clear all selections when clicked
        resetButton.addEventListener('click', function () {
            // Deselect all options in the select dropdown
            for (let option of selectElement.options) {
                option.selected = false;
            }
        });

        // Append the reset button below the athlete selection dropdown
        selectElement.parentNode.appendChild(resetButton);
    });
</script>
{% endblock %}
